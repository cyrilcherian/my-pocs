<section layout="row" flex="100" ng-cloak><section flex><md-toolbar layout="row" layout-align="space-between center"><qb-sidenav-button></qb-sidenav-button><h1 class="md-toolbar-tools">{{$ctrl.isEdit? 'Edit User Details': 'Create User Profile'}}</h1><qb-notification-bar></qb-notification-bar></md-toolbar><div class="main-body-scroll"><div class="main-body-scroll-content"><div id="saveBtn" ng-hide="$ctrl.isEdit"><md-button class="md-fab md-accent md-fab-bottom-right" aria-label="Save" ng-click="$ctrl.create()" ng-disabled="$ctrl.validate(userForm)" style="position:fixed !important"><md-tooltip md-direction="top">Save</md-tooltip><ng-md-icon icon="save"></ng-md-icon></md-button></div><div id="saveBtn" ng-show="$ctrl.isEdit"><md-button class="md-fab md-accent md-fab-bottom-right" aria-label="Save" ng-click="$ctrl.edit()" ng-disabled="$ctrl.validate(userForm)" style="position:fixed !important"><md-tooltip md-direction="top">Save</md-tooltip><ng-md-icon icon="save"></ng-md-icon></md-button></div><div class="main-body-container"><div layout-gt-sm="row" layout="column" layout-margin><div flex-gt-sm="25" flex class="bg-white md-whiteframe-1dp"><div class="user-profile-group"><div class="user-profile"><div class="user-profile__header"><div class="user-profile__image"><img ng-src="http://www.gravatar.com/avatar/{{ $ctrl.getLoggedInUser().email | gravatar}}?s=300&d=identicon" alt="{{$ctrl.getLoggedInUser().name}}"></div><!-- /.user-profile__image --><div class="user-profile__title"><h1 class="user-profile-name">{{$ctrl.data.name}}</h1><h2 class="user-profile-role">{{$ctrl.data.role}}</h2></div><!-- /.user-profile__title --></div><!-- /.user-profile__header --><div class="user-profile__stats"><div class="user-profile__msg"><p>QManager currently only allows you to use custom avatars that are uploaded through <a ng-href="http://www.gravatar.com">Gravatar</a>.</p></div><!-- /.user-profile__msg --><ul class="user-profile-stat-list" ng-show="$ctrl.isEdit"><li class="user-profile-stat-list__item"><a href="" class="md-secondary md-button user-profile-stat-list__link" layout="row" ng-click="$ctrl.goto('/questions')"><span class="flex" flex="80"><span class="stat-list-text">Questions</span> </span><span class="flex" flex="20"><span class="stat-list-value">{{$ctrl.count.questions}}</span> </span></a><!-- /.user-profile-stat-list__link --></li><li class="user-profile-stat-list__item" ng-if="!$ctrl.isAuthor"><a href="" class="md-secondary md-button user-profile-stat-list__link" layout="row" ng-click="$ctrl.goto('/banks/')"><span class="flex" flex="80"><span class="stat-list-text">Banks</span> </span><span class="flex" flex="20"><span class="stat-list-value">{{$ctrl.count.banks}}</span> </span></a><!-- /.user-profile-stat-list__link --></li><li class="user-profile-stat-list__item"><a href="" class="md-secondary md-button user-profile-stat-list__link" layout="row" ng-click="$ctrl.goto('/assignments/')"><span class="flex" flex="80"><span class="stat-list-text">Assignments</span> </span><span class="flex" flex="20"><span class="stat-list-value">{{$ctrl.count.assignments}}</span> </span></a><!-- /.user-profile-stat-list__link --></li></ul><!-- /.user-profile-stat-list --></div><!-- /.user-profile__stats --></div><!-- /.user-profile --></div><!-- /.user-profile-group --></div><!-- /.col-1 --><div flex flex-gt-sm="75" class="bg-white md-whiteframe-1dp"><div class="user-profile-edit"><div class="user-profile"><form name="userForm" class="user-profile-form"><div class="user-details-group"><div class="user-details"><div class="user-details__header"><h3 class="md-title">About</h3></div><!-- /.user-details__header --><div class="user-details__main"><ul class="user-details-list"><li class="user-details-list__item user-details-list__item--no-line"><md-input-container class="md-block" flex><input required ng-model="$ctrl.user.name" name="userName" placeholder="Name"><div ng-messages="userForm.userName.$error"><div ng-message="required" ng-if="userForm.userName.$error.required && userForm.userName.$touched">Please enter Name.</div></div></md-input-container></li><li class="user-details-list__item user-details-list__item--no-line"><md-input-container class="md-block" flex><input placeholder="Email" required name="email" ng-model="$ctrl.user.email" maxlength="200" ng-pattern="/^.+@.+\..+$/" ng-change="$ctrl.userEmailCheck($ctrl.user.email)" ng-disabled="$ctrl.isEdit"><div ng-messages="userForm.email.$error"><div ng-message="required" ng-if="userForm.email.$error.required && userForm.email.$touched">Please enter the email address.</div><div ng-message="pattern" ng-if="userForm.email.$error.pattern && userForm.email.$touched">Please enter a valid email address.</div><div ng-show="$ctrl.user.alreadyTaken">The user name you entered is already taken</div></div></md-input-container></li><li class="user-details-list__item user-details-list__item--no-line"><md-input-container ng-if="$ctrl.isAdmin() && !$ctrl.isEdit" class="md-block" flex><label>Role</label><md-select ng-model="$ctrl.user.roles" multiple="multiple" required name="role" aria-label="Roles"><md-option ng-repeat="role in $ctrl.roles" ng-value="role">{{role.name}}</md-option></md-select><div ng-messages="userForm.role.$error"><div ng-message="required" ng-if="userForm.role.$error.required && userForm.role.$touched">Please select a role.</div></div></md-input-container><md-input-container ng-if="$ctrl.isAdmin() && $ctrl.isEdit" class="md-block" flex><label>Role</label><md-select ng-model="$ctrl.user.roles" multiple="multiple" required name="role" placeholder="Roles*"><md-option ng-repeat="role in $ctrl.roles" ng-value="role" ng-selected="role.selected">{{role.name}}</md-option></md-select><div ng-messages="userForm.role.$error"><div ng-message="required">Please select a role.</div></div></md-input-container></li></ul><!-- /.user-details-list --></div><!-- /.user-details__main --></div><!-- /.user-details --></div><!-- /.user-details-group --><md-divider></md-divider></form><!-- /.user-profile-form --></div><!-- /.user-profile --></div><!-- /.user-profile-group --></div><!-- /.col-2 --></div><!-- /.row --></div><!-- /.main-body-container --></div><!-- /.main-body-scroll-content --></div><!-- /.main-body-scroll --></section></section>