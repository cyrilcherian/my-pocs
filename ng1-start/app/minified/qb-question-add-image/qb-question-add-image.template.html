<md-dialog aria-label="Filter Question" layout-wrap ng-cloak flex-gt-sm="75" flex="90"><form name="filterQuestionFormForm"><md-toolbar><div class="md-toolbar-tools"><h2>Insert Image</h2><span flex></span><md-button class="md-icon-button" ng-click="$ctrl.close($event)"><ng-md-icon icon="close" aria-label="Close dialog"></ng-md-icon></md-button></div></md-toolbar><md-dialog-content><div class="dialog-content-group"><div class="dialog-content"><md-tabs md-selected="$ctrl.selectedIndex" md-border-bottom class="dialog-tabs"><md-tab label="Upload" md-on-select="$ctrl.onSelect('Upload')"><md-content><md-tab-body><div class="upload-file-group"><div class="upload-file"><div class="upload-file__row"><div class="upload-file__col upload-file__col--details"><div class="upload-details-list"><div class="upload-details-list__item"><md-input-container md-no-float class="dialog-form__input-container"><input type="file" ngf-select ng-model="$ctrl.picFile" name="file" accept="image/*" ngf-pattern=".png,.jpg,.jpeg" ngf-max-size="2MB" required ngf-model-invalid="errorFile"></md-input-container><p ng-show="filterQuestionFormForm.file.$error.maxSize">File too large {{errorFile.size / 1000000|number:1}}MB: max 2M</p><p ng-show="filterQuestionFormForm.file.$error.pattern">Only jpg and png files are allowed</p></div><!-- /.upload-details-list__item --><div class="upload-details-list__item"><md-input-container md-no-float class="dialog-form__input-container"><textarea type="text" class="dialog-form__textarea" ng-model="$ctrl.caption" name="caption" required placeholder="Add caption"></textarea><div ng-messages="filterQuestionFormForm.caption.$error"><div ng-message="required" ng-if="filterQuestionFormForm.caption.$error.required && filterQuestionFormForm.caption.$touched">Please enter Image Caption</div></div></md-input-container></div><!-- /.upload-details-list__item --></div><!-- /.upload-details-list --></div><!-- /.upload-file__col --><div class="upload-file__col upload-file__col--preview"><div class="upload-file__preview"><img ngf-thumbnail="$ctrl.picFile" ng-show="filterQuestionFormForm.file.$valid"><md-button md-no-ink class="md-fab md-mini button-upload-remove" ng-click="$ctrl.picFile = null" ng-show="$ctrl.picFile"><ng-md-icon icon="close" aria-label="Remove"></ng-md-icon></md-button></div><!-- /.upload-file__preview --></div><!-- /.upload-file__col --></div><!-- /.upload-file__row --></div><!-- /.upload-file --></div><!-- /.upload-file-group --></md-tab-body></md-content></md-tab><md-tab label="Library" md-on-select="$ctrl.onSelect('Library')"><qb-table-search-bar selected="$ctrl.selected" data="$ctrl.searchParam"></qb-table-search-bar><md-content><md-radio-group ng-model="$ctrl.media"><div class="form-image-list" ng-cloak md-progress="promise"><div class="form-image-list__item" ng-repeat="image in $ctrl.lib"><md-radio-button ng-value="{{image}}" aria-label="media image"><div class="form-image-list__item-block"><div class="form-image-list__thumb"><div class="form-image-list__image-container"><img ng-src="{{image.thumb.url}}" class="form-image-list__image"><!-- /.form-image-list__image --></div><!-- /.form-image-list__image-container --></div><!-- /.form-image-list__thumb --><div class="form-image-list__details"><p>{{image.caption}}</p><p>{{image.customId| numberFixedLen:5}}</p></div><!-- /.form-image-list__details --></div><!-- /.form-image-list__item-block --></md-radio-button></div><!-- /.form-image-list__item --></div><!-- /.form-image-list --></md-radio-group></md-content></md-tab></md-tabs><md-table-pagination ng-show="$ctrl.tabSelected == 'Library'" md-limit="25 " md-limit-options="[25, 50, 100] " md-page="$ctrl.query.page" md-total="{{$ctrl.total}}" md-page-select="$ctrl.options.pageSelect " md-on-paginate="$ctrl.logPagination"></md-table-pagination></div><!-- /.dialog-content --><md-divider></md-divider></div><!-- /.dialog-content-group --></md-dialog-content><md-dialog-actions><div class="dialog-actions-group"><div class="dialog-actions" layout="row"><span flex></span><md-button ng-disabled="!$ctrl.picFile || !$ctrl.caption" ng-show="$ctrl.tabSelected == 'Upload'" aria-label="close " class="md-primary" ng-click="$ctrl.upload($ctrl.picFile, $ctrl.caption)">Insert Image</md-button><md-button ng-disabled="!$ctrl.media" ng-show="$ctrl.tabSelected == 'Library'" aria-label="close " class="md-primary" ng-click="$ctrl.libSelect(picFile)">Insert Image</md-button></div><!-- /.dialog-actions --></div><!-- /.dialog-actions-group --></md-dialog-actions></form></md-dialog>