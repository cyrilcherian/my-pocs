<div ng-cloak><form name="detailsForm"><div ng-repeat="section in $ctrl.other" ng-if="section.category !== 'video' && section.category !== 'image'"><div ng-if="section.category == 'text'"><qb-question-display-text data="section" on-delete="$ctrl.removeSection(section)" view="$ctrl.view"></qb-question-display-text></div><div ng-if="$ctrl.isMainSection(section)"><div ng-if="$ctrl.view !== 'review'"><div class="question-create__block" flex layout="column"><md-input-container ng-if="$ctrl.show.stem" md-no-float flex><div class="question-create__section-header"><p class="md-title">Question Stem</p><span class="question-create__instructions" ng-if="$ctrl.view !== 'review'"><p>This should include any necessary information to answer the question, such as: Age, Gender, Site of Care, Presenting Complaint, Duration, Patient History (including any relevant family history if known), Physical Findings, Result of Diagnostic Studies, Initial Treatment, and Subsequent Findings.</p></span></div><!-- /.question-create__section-header --><textarea ui-tinymce="$ctrl.tinyMceOptions" ng-model="$ctrl.data.stem" type="text" name="stem" placeholder="What is the stem?"></textarea><!-- <div ng-messages="detailsForm.stem.$error">
                                <div ng-if="detailsForm.stem.$error.required && detailsForm.stem.$touched" ng-message="required">Please enter Question stem</div>
                            </div> --></md-input-container></div><!-- /.question-create__block --><md-divider></md-divider><div class="question-create__block" flex layout="column"><md-input-container flex md-no-float ng-if="$ctrl.show.stem"><div class="question-create__section-header"><p class="md-title"><span style="color:red" ng-if="$ctrl.view !== 'review'">*</span>Question</p><span class="question-create__instructions" ng-if="$ctrl.view !== 'review'"><p>Question Lead in: The question that the case was leading to</p><p>Sample Questions:</p><ul><li>Which of the following is the most appropriate next step?</li><li>What is the most likely explanation for the patient's symptoms?</li><li>Which diagnostic test should be ordered next?</li><li>What is the most likely prognosis for this patient?</li><li>This treatment plan would most likely impact which of the following?</li></ul></span></div><!-- /.question-create__section-header --><textarea ui-tinymce="$ctrl.tinyMceOptions" ng-model="$ctrl.data.question" type="text" name="question" placeholder="What is the question?" required></textarea><div ng-messages="detailsForm.question.$error"><div ng-if="detailsForm.question.$error.required && detailsForm.question.$touched" ng-message="required">Please enter Question</div></div></md-input-container></div><md-divider></md-divider><div class="question-create__block question-create__block--question-type" flex layout="column" ng-if="!$ctrl.hideType"><md-input-container flex md-no-float><div class="question-create__section-header"><p class="md-title">Question Type</p></div><!-- /.question-create__section-header --><md-select ng-model="section.category" placeholder="Question Type" class="md-no-underline"><md-option value="{{$ctrl.category.SINGLECHOICE}}">{{$ctrl.category.NAME.SINGLECHOICE}}</md-option><md-option value="{{$ctrl.category.MULTIPLECHOICE}}">{{$ctrl.category.NAME.MULTIPLECHOICE}}</md-option><md-option value="{{$ctrl.category.SHORTANSWER}}">{{$ctrl.category.NAME.SHORTANSWER}}</md-option><md-option value="{{$ctrl.category.ESSAY}}">{{$ctrl.category.NAME.ESSAY}}</md-option></md-select></md-input-container></div><!-- /.question-create__block --><!--
                    <span flex="5"></span>
                    <md-input-container flex="25" ng-if="($ctrl.view == 'create')">
                    <input ng-model="$ctrl.type" placeholder="Question Type" ng-disabled="true" />
                    </md-input-container>
                    <md-input-container flex="25" ng-if="($ctrl.view == 'edit') || ($ctrl.view == 'review')">
                    <input ng-model="section.category" placeholder="Question Type" ng-disabled="true" />
                    </md-input-container>
                    --></div><div ng-if="$ctrl.view === 'review'" class="question-create__block" flex layout="column"><div class="question-create__section-header"><p class="md-title"><span style="color:red" ng-if="$ctrl.view !== 'review'">*</span>Question</p><span class="question-create__instructions" ng-if="$ctrl.view !== 'review'"><p>Question Lead in: The question that the case was leading to</p><p>Sample Questions:</p><ul><li>Which of the following is the most appropriate next step?</li><li>What is the most likely explanation for the patient's symptoms?</li><li>Which diagnostic test should be ordered next?</li><li>What is the most likely prognosis for this patient?</li><li>This treatment plan would most likely impact which of the following?</li></ul></span></div><!-- /.question-create__section-header --><div flex ng-bind-html="$ctrl.data.stem"></div><div flex ng-bind-html="$ctrl.data.question"></div></div><!-- /.question-create__block --><md-divider></md-divider><div layout="row" ng-if="section.category === $ctrl.category.SINGLECHOICE"><qb-question-add-multiplechoice data="section" flex view="$ctrl.view"></div><div ng-if="section.category === $ctrl.category.MULTIPLECHOICE"><qb-question-add-multipleresponse data="section" flex view="$ctrl.view"><div ng-if="section.choices.length < 2 && ($ctrl.view !== 'review')" class="question-create__warning">Each question must have at least two answer choices.</div></div><!-- <div ng-if="section.category === $ctrl.category.SHORTANSWER">
                    <div class="question-create__section-header">
                        <p class="md-title">{{$ctrl.category.NAME.SHORTANSWER}}</p>
                    </div> --><!-- /.question-create__section-header --><!-- <qb-question-add-shortanswer data="section" flex view="$ctrl.view" />
            </div> --><!-- <div ng-if="section.category === $ctrl.category.ESSAY">
                    <div class="question-create__section-header">
                        <p class="md-title">{{$ctrl.category.NAME.ESSAY}}</p>
                    </div> --><!-- /.question-create__section-header --><!-- <qb-question-add-essay data="section" flex view="$ctrl.view" />
            </div> --></div><!--
            <md-button ng-click="$ctrl.addText()" class="md-primary md-raised add-text" ng-if="$ctrl.isMainSection(section) && $ctrl.view !== 'review'">ADD TEXT</md-button>

            --></div><md-divider></md-divider><qb-question-references data="$ctrl.data.references" view="$ctrl.view"></qb-question-references><md-divider></md-divider><div class="question-create__block" flex layout="column"><div class="question-create__section-header"><p class="md-title"><span style="color:red" ng-if="$ctrl.view !== 'review'">*</span>Rationale</p><span class="question-create__instructions" ng-if="$ctrl.view !== 'review'"><p>Provide a succinct reasoning of why the correct answer is, what it is. This may include references to literature,clinical trials, and guidelines. You may also explain why all or some of the distractors are incorrect.</p></span></div><!-- /.question-create__section-header --><md-input-container md-no-float ng-if="$ctrl.view !== 'review'"><textarea ui-tinymce="$ctrl.tinyMceOptions" ng-if="$ctrl.show.stem" name="rationale" rows="6" type="text" ng-model="$ctrl.data.rationale" placeholder="Type rationale for question" flex required></textarea><div ng-messages="detailsForm.rationale.$error"><div ng-if="detailsForm.rationale.$error.required && detailsForm.rationale.$touched" ng-message="required">Please enter Rationale</div></div></md-input-container><div ng-if="$ctrl.view === 'review'" flex><div flex ng-bind-html="$ctrl.data.rationale"></div></div></div><!-- /.question-create__block --><div class="question-create__block" flex layout="column" ng-hide="true"><div class="question-create__section-header"><p class="md-title">Media</p></div><!-- /.question-create__section-header --><div ng-if="$ctrl.media.length !== 0"></div><div ng-if="$ctrl.media.length === 0"><div class="empty">No media available.</div></div><ul id="dragBox" ui-sortable="$ctrl.dragControlListeners" ng-model="$ctrl.media"><li ng-repeat="section in $ctrl.media"><div ng-if="section.category === 'video' || section.category === 'image'" class="question-create__media"><div ng-if="$ctrl.view !== 'review'"><!-- <div class="container-drag draggable"></div> --></div><div ng-if="section.category === 'video'"><qb-question-display-video data="section" on-delete="$ctrl.removeSection(section)" view="$ctrl.view"></qb-question-display-video></div><div ng-if="section.category === 'image'"><qb-question-display-image data="section" on-delete="$ctrl.removeSection(section)" view="$ctrl.view"></qb-question-display-image></div></div><!-- /.question-create__media --></li></ul><span><md-button ng-if="$ctrl.view !== 'review'" ng-click="$ctrl.addImage($event)" class="md-primary">ADD IMAGE</md-button></span><span><md-button ng-if="$ctrl.view !== 'review'" ng-click="$ctrl.addVideo($event)" class="md-primary">ADD VIDEO</md-button></span></div></form></div><!-- /.question-create__block -->