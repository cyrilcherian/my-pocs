<md-dialog aria-label="Question Preview" ng-cloak style="width:100%;height:100%"><form name="searchFilter"><md-toolbar layout="row" layout-align="space-between center"><h1 class="md-toolbar-tools">Filter Question</h1><md-button class="md-icon-button" ng-click="$ctrl.cancel($event)"><ng-md-icon icon="close" aria-label="Close dialog"></ng-md-icon></md-button></md-toolbar><md-dialog-content layout="column"><div class="dialog-content-group"><div class="dialog-content"><div class="question-create__block question-create__block--question-type" flex layout="column"><div class="question-create__section-header"><p class="md-title">Question</p></div><!-- /.question-create__section-header --><md-input-container flex md-no-float><textarea ng-model="$ctrl.data.question" name="question" placeholder="Question" rows="1"></textarea></md-input-container></div><!-- /.question-create__block --><md-divider></md-divider><div class="question-create__block question-create__block--question-type" flex layout="column"><div class="question-create__section-header"><p class="md-title">Usage in banks</p></div><!-- /.question-create__section-header --><md-input-container flex md-no-float><input type="number" ng-model="$ctrl.data.lessTimesUsed" name="lessTimesUsed" placeholder="Minimum times used" min="0"></md-input-container><md-input-container flex md-no-float><input type="number" ng-model="$ctrl.data.moreTimesUsed" name="moreTimesUsed" placeholder="Maximium times used" min="0"></md-input-container></div><!-- /.question-create__block --><md-divider></md-divider><div class="question-create__block question-create__block--question-type" flex layout="column" ng-if="$ctrl.isAdmin || $ctrl.isEditor"><div class="question-create__section-header"><p class="md-title">Review Count</p></div><!-- /.question-create__section-header --><md-input-container flex md-no-float><input type="number" ng-model="$ctrl.data.lessReviewCount" name="lessReviewCount" placeholder="Minimum reviews" min="0"></md-input-container><md-input-container flex md-no-float><input type="number" ng-model="$ctrl.data.moreReviewCount" name="moreReviewCount" placeholder="Maximium reviews" min="0"></md-input-container></div><!-- /.question-create__block --><md-divider></md-divider><div class="question-create__block question-create__block--question-type" flex layout="column"><div class="question-create__section-header"><p class="md-title">Question ID</p></div><!-- /.question-create__section-header --><md-chips md-min-length="2" ng-model="$ctrl.selectedQuestionIds" md-require-match="true" filter-selected="true"><md-autocomplete md-selected-item="$ctrl.selectedQuestion" md-search-text="$ctrl.queryForQuestion" md-items="item in $ctrl.questionCustomSearch($ctrl.queryForQuestion)" md-item-text="item.value" placeholder="Search ID"><span md-highlight-text="$ctrl.searchText">{{item.value | numberFixedLen :5 }}</span></md-autocomplete><md-chip-template><span><strong>{{$chip.value | numberFixedLen :5 }}</strong></span></md-chip-template></md-chips></div><!-- /.question-create__block --><md-divider></md-divider><div class="question-create__block question-create__block--question-type" flex layout="column" ng-if="$ctrl.isAdmin || $ctrl.isEditor"><div class="question-create__section-header"><p class="md-title ng-binding">Set Criteria</p></div><!-- /.question-create__section-header --><div ng-if="!$ctrl.isTagsEmpty()"><qb-criteria-add all="$ctrl.data.allCriteria" criteria="$ctrl.criteria"></qb-criteria-add></div><div ng-if="$ctrl.isTagsEmpty()"><div class="empty">No criteria set</div></div><div layout="row"><span><md-button ng-click="$ctrl.inProgress.tag || $ctrl.selectTags($event)" class="md-primary">Add Criteria</md-button></span></div></div><!-- /.question-create__block --><md-divider></md-divider><div class="question-create__block question-create__block--question-type" flex layout="column" ng-if="$ctrl.isAdmin || $ctrl.isEditor"><div class="question-create__section-header"><p class="md-title">Select Status</p></div><!-- /.question-create__section-header --><md-list flex ng-cloak><md-list-item ng-repeat="state in $ctrl.data.statuses"><span class="question-display-list__text"><h3>{{state.name}}</h3></span><md-checkbox class="md-secondary" ng-model="state.selected" aria-label="state"></md-checkbox><md-divider></md-divider></md-list-item></md-list></div><!-- /.question-create__block --><md-divider></md-divider><div class="question-create__block question-create__block--question-type" flex layout="column" ng-if="$ctrl.isAdmin || $ctrl.isEditor"><div class="question-create__section-header"><p class="md-title ng-binding">Select Authors</p></div><!-- /.question-create__section-header --><md-list flex ng-cloak class="assignment-user-list" ng-if="!$ctrl.isAuthorsEmpty()" style="margin-bottom: 16px"><md-list-item ng-repeat="user in  $ctrl.data.authors track by $index" class="assignment-user-list__item"><span class="assignment-user-image"><img ng-src="{{user.avatar? user.avatar : 'app/resources/images/placeholder-avatar.png'}}" alt="{{user.name}}"></span><p>{{user.name}}</p><md-button class="md-icon-button" ng-click="$ctrl.removeData($ctrl.data.authors, user)" aria-label="Remove"><md-tooltip md-direction="top">Remove</md-tooltip><ng-md-icon icon="clear"></ng-md-icon></md-button><md-divider></md-divider></md-list-item></md-list><div ng-if="$ctrl.isAuthorsEmpty()"><div class="empty">No Authors selected.</div></div><md-input-container class="md-block" flex><md-button ng-click="$ctrl.inProgress.user || $ctrl.selectUsers($event, 'Author')" class="md-primary">Add Authors</md-button></md-input-container></div><!-- /.question-create__block --><md-divider></md-divider><div style="display:none" ng-hide="true"><div class="question-create__block question-create__block--question-type" flex layout="column" ng-if="$ctrl.isAdmin || $ctrl.isEditor"><div class="question-create__section-header"><p class="md-title ng-binding">Select Reviewers</p></div><!-- /.question-create__section-header --><md-list flex ng-cloak class="assignment-user-list" ng-if="!$ctrl.isReviewersEmpty()"><md-list-item ng-repeat="user in  $ctrl.data.reviewers track by $index" id="{{user.id}}" class="assignment-user-list__item"><span class="assignment-user-image"><img ng-src="{{user.avatar? user.avatar : 'app/resources/images/placeholder-avatar.png'}}" alt="{{user.name}}"></span><p>{{user.name}}</p><md-button class="md-icon-button" ng-click="$ctrl.removeData($ctrl.data.reviewers, user)" aria-label="Remove"><md-tooltip md-direction="top">Remove</md-tooltip><ng-md-icon icon="clear"></ng-md-icon></md-button><md-divider></md-divider></md-list-item></md-list><div ng-if="$ctrl.isReviewersEmpty()"><div class="empty">No Reviewers selected.</div></div><md-input-container class="md-block" flex><md-button ng-click="$ctrl.selectUsers($event, 'Reviewer')" style="float:right">Add Reviewers</md-button></md-input-container></div><!-- /.question-create__block --><md-divider></md-divider></div><div class="question-create__block question-create__block--question-type" flex layout="column"><div class="question-create__section-header"><p class="md-title">Last Modification Date</p></div><!-- /.question-create__section-header --><div layout="row" layout-align="start center"><label style="width: 50px">From</label><md-datepicker ng-model="$ctrl.data.lastModificationDateStart" md-placeholder="Enter from date"></md-datepicker></div><div layout="row" layout-align="start center"><label style="width: 50px">To</label><md-datepicker ng-model="$ctrl.data.lastModificationDateEnd" md-placeholder="Enter to date"></md-datepicker></div></div><!-- /.question-create__block --><md-divider></md-divider><div class="question-create__block question-create__block--question-type" flex layout="column"><div class="question-create__section-header"><p class="md-title">Creation Date</p></div><!-- /.question-create__section-header --><div layout="row" layout-align="start center"><label style="width: 50px">From</label><md-datepicker ng-model="$ctrl.data.creationDateStart" md-placeholder="Enter from date"></md-datepicker></div><div layout="row" layout-align="start center"><label style="width: 50px">To</label><md-datepicker ng-model="$ctrl.data.creationDateEnd" md-placeholder="Enter To date"></md-datepicker></div></div><!-- /.question-create__block --><md-divider></md-divider><div ng-if="$ctrl.isAdmin || $ctrl.isEditor"><div class="question-create__block question-create__block--question-type" flex layout="column"><div class="question-create__section-header"><p class="md-title">Completed Date</p></div><!-- /.question-create__section-header --><div layout="row" layout-align="start center"><label style="width: 50px">From</label><md-datepicker ng-model="$ctrl.data.completedDateStart" md-placeholder="Enter from date"></md-datepicker></div><div layout="row" layout-align="start center"><label style="width: 50px">To</label><md-datepicker ng-model="$ctrl.data.completedDateEnd" md-placeholder="Enter To date"></md-datepicker></div></div><!-- /.question-create__block --><md-divider></md-divider></div><div style="display:none"><div class="question-create__block question-create__block--question-type" flex layout="column"><div class="question-create__section-header"><p class="md-title">Fields to display</p></div><!-- /.question-create__section-header --><div ng-if="$ctrl.fields.length > 0"><md-list-item ng-repeat="field in $ctrl.fields | filter:{selected:true}"><span class="question-display-list__text"><h3>{{field.field}}</h3></span><span><md-button class="md-icon-button" aria-label="Remove" ng-click="$ctrl.unSelectField($ctrl.fields, field)"><md-tooltip md-direction="top">Remove</md-tooltip><ng-md-icon icon="clear"></ng-md-icon></md-button></span></md-list-item></div><md-input-container class="md-block" flex><md-button ng-click="$ctrl.selectFields($event)" class="md-primary">Add Fields</md-button></md-input-container></div><!-- /.question-create__block --><md-divider></md-divider></div><div class="question-create__block question-create__block--question-type" flex layout="column"><div class="question-create__section-header"><p class="md-title">Sort By</p></div><!-- /.question-create__section-header --><md-select ng-model="$ctrl.data.order" placeholder="Order By"><md-option ng-value="field.key" ng-repeat="field in $ctrl.orderFields">{{field.field}}</md-option></md-select><md-select ng-model="$ctrl.data.sortBy" placeholder="Sort By"><md-option ng-value="field.key" ng-repeat="field in $ctrl.sortFields">{{field.field}}</md-option></md-select></div><!-- /.question-create__block --></div><!-- /.dialog-content --><md-divider></md-divider></div><!-- /.dialog-content-group --></md-dialog-content><md-dialog-actions><div class="dialog-actions-group"><div class="dialog-actions" layout="row"><span flex></span><md-button ng-click="$ctrl.reset()" class="">Reset</md-button><md-button ng-click="$ctrl.filter()" class="md-primary">Filter</md-button></div><!-- /.dialog-actions --></div><!-- /.dialog-actions-group --></md-dialog-actions></form></md-dialog>